/* ğŸ“± å“åº”å¼å¸ƒå±€ç³»ç»Ÿ - æ¼è›‹æ¸¸æˆ */

/* =======================================
   BASE LAYOUT SYSTEM - åŸºç¡€å¸ƒå±€ç³»ç»Ÿ
   ======================================= */

/* æ¸¸æˆå®¹å™¨ - ä½¿ç”¨CSS Gridå®ç°å“åº”å¼å¸ƒå±€ */
.game-table {
  container-type: inline-size;
}

/* å„åŒºåŸŸå‘½å - å·²åœ¨game.cssä¸­æ­£ç¡®è®¾ç½® */

/* =======================================
   MOBILE LAYOUT (max-width: 480px)
   ======================================= */

@media (max-width: 480px) {
  .game-table {
    grid-template-areas:
      "top-info-bar"
      "team-info-bar"
      "player-north"
      "central-play-area"
      "player-south"
      "control-panel";
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto 1fr auto auto;
    gap: var(--space-3, 10px);
    padding: var(--space-3, 10px);
  }

  /* éšè—ä¸œè¥¿ç©å®¶ï¼Œä½¿ç”¨æŒ‡ç¤ºå™¨ä»£æ›¿ */
  .player-west,
  .player-east {
    display: none;
  }

  /* ç®€åŒ–é¡¶éƒ¨ä¿¡æ¯æ  */
  .top-info-bar {
    flex-direction: column;
    gap: var(--space-2);
    padding: var(--space-3);
    font-size: var(--font-size-sm);
  }

  .info-display {
    font-size: var(--font-size-xs);
    padding: var(--space-1) var(--space-2);
  }

  /* å›¢é˜Ÿä¿¡æ¯æ ä¼˜åŒ– */
  .team-info-bar {
    flex-direction: column;
    gap: var(--space-2);
    padding: var(--space-2);
    font-size: var(--font-size-sm);
  }

  /* ä¸­å¤®åŒºåŸŸé‡æ–°è®¾è®¡ */
  .central-play-area {
    min-height: 40vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: var(--space-4);
  }

  /* ç©å®¶æ‰‹ç‰ŒåŒºåŸŸ */
  .player-hand-cards {
    max-width: 100%;
    padding: var(--space-2);
    gap: var(--card-gap-sm);
  }

  /* ç‰Œé¢å°ºå¯¸è°ƒæ•´ */
  .player-card {
    width: var(--card-width-xs);
    height: var(--card-height-xs);
    font-size: var(--font-size-xs);
  }

  /* æ§åˆ¶é¢æ¿é‡æ–°å¸ƒå±€ */
  .control-panel {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(44, 62, 80, 0.98);
    backdrop-filter: blur(10px);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    padding: var(--space-3);
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    z-index: var(--z-fixed);
  }

  .control-buttons {
    justify-content: space-around;
    gap: var(--space-2);
  }

  .btn {
    min-width: var(--min-touch-target);
    min-height: var(--min-touch-target);
    font-size: var(--font-size-sm);
    padding: var(--space-3) var(--space-4);
    border-radius: var(--radius-md);
  }

  /* æŒ‰é’®å›¾æ ‡å’Œæ–‡å­—å¸ƒå±€ */
  .btn {
    flex-direction: column;
    gap: var(--space-1);
  }

  .btn .btn-icon {
    font-size: var(--font-size-lg);
  }

  .btn .btn-text {
    font-size: var(--font-size-xs);
  }
}

/* =======================================
   TABLET LAYOUT (481px - 768px)
   ======================================= */

@media (min-width: 481px) and (max-width: 768px) {
  .game-container {
    grid-template-areas:
      "top-bar top-bar"
      "team-info team-info"
      "west center"
      "south south"
      "controls controls";
    grid-template-columns: 1fr 2fr;
    grid-template-rows: auto auto 1fr auto auto auto;
    gap: var(--space-4);
    padding: var(--space-4);
  }

  /* éšè—ä¸œä¾§ç©å®¶ */
  .player-position.player-east {
    display: none;
  }

  /* è°ƒæ•´é¡¶éƒ¨ä¿¡æ¯æ  */
  .top-info-bar {
    flex-wrap: wrap;
    gap: var(--space-3);
    padding: var(--space-4);
  }

  /* å›¢é˜Ÿä¿¡æ¯æ  */
  .team-info-bar {
    padding: var(--space-3);
    gap: var(--space-4);
  }

  /* ç©å®¶åŒºåŸŸå¸ƒå±€ */
  .player-position.player-west {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  /* ç‰Œé¢å°ºå¯¸ */
  .player-card {
    width: var(--card-width-sm);
    height: var(--card-height-sm);
    font-size: var(--font-size-sm);
  }

  /* æ§åˆ¶é¢æ¿ */
  .control-panel {
    padding: var(--space-4);
  }

  .control-buttons {
    justify-content: center;
    gap: var(--space-3);
  }
}

/* =======================================
   DESKTOP LAYOUT (769px - 1280px)
   ======================================= */

@media (min-width: 769px) and (max-width: 1280px) {
  .game-container {
    grid-template-columns: 1fr 2.5fr 1fr;
    gap: var(--space-5);
    padding: var(--space-5);
  }

  /* ä¼˜åŒ–é¡¶éƒ¨ä¿¡æ¯æ å¸ƒå±€ */
  .top-info-bar {
    justify-content: space-between;
    padding: var(--space-4) var(--space-6);
  }

  /* å›¢é˜Ÿä¿¡æ¯æ  */
  .team-info-bar {
    justify-content: center;
    padding: var(--space-4);
    gap: var(--space-6);
  }

  /* ç©å®¶åŒºåŸŸ */
  .player-position {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  /* æ ‡å‡†ç‰Œé¢å°ºå¯¸ */
  .player-card {
    width: var(--card-width);
    height: var(--card-height);
  }
}

/* =======================================
   LARGE DESKTOP LAYOUT (1281px+)
   ======================================= */

@media (min-width: 1281px) {
  .game-container {
    grid-template-columns: 1fr 3fr 1fr;
    gap: var(--space-6);
    padding: var(--space-6);
    max-width: 1920px;
    margin: 0 auto;
  }

  /* å¤§å±å¹•ä¼˜åŒ– */
  .top-info-bar {
    justify-content: space-between;
    padding: var(--space-5) var(--space-8);
  }

  .info-display {
    font-size: var(--font-size-lg);
    padding: var(--space-3) var(--space-4);
  }

  /* å›¢é˜Ÿä¿¡æ¯æ  */
  .team-info-bar {
    justify-content: center;
    padding: var(--space-5);
    gap: var(--space-8);
    font-size: var(--font-size-lg);
  }

  /* å¤§çº¸ç‰Œå°ºå¯¸ */
  .player-card {
    width: var(--card-width-lg);
    height: var(--card-height-lg);
    font-size: var(--font-size-base);
  }

  /* æ§åˆ¶é¢æ¿ */
  .control-panel {
    padding: var(--space-6);
  }

  .btn {
    font-size: var(--font-size-base);
    padding: var(--space-4) var(--space-6);
    min-width: 120px;
  }
}

/* =======================================
   PLAYER POSITION LAYOUTS - ç©å®¶ä½ç½®å¸ƒå±€
   ======================================= */

/* ç©å®¶ä½ç½®é€šç”¨æ ·å¼ */
.player-position {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-4);
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--radius-lg);
  border: 1px solid rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  transition: all var(--duration-normal) var(--ease-in-out);
}

.player-position:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.2);
}

/* å—åŒ—ç©å®¶ï¼ˆå›¢é˜Ÿä¼™ä¼´ï¼‰ */
.player-position.player-north,
.player-position.player-south {
  background: linear-gradient(135deg,
    rgba(52, 152, 219, 0.1) 0%,
    rgba(41, 128, 185, 0.15) 100%);
  border-color: rgba(52, 152, 219, 0.3);
}

/* ä¸œè¥¿ç©å®¶ï¼ˆå¯¹æ‰‹å›¢é˜Ÿï¼‰ */
.player-position.player-east,
.player-position.player-west {
  background: linear-gradient(135deg,
    rgba(231, 76, 60, 0.1) 0%,
    rgba(192, 57, 43, 0.15) 100%);
  border-color: rgba(231, 76, 60, 0.3);
}

/* å½“å‰ç©å®¶é«˜äº® */
.player-position.current-player {
  background: linear-gradient(135deg,
    rgba(241, 196, 15, 0.15) 0%,
    rgba(243, 156, 18, 0.2) 100%);
  border-color: rgba(241, 196, 15, 0.5);
  box-shadow: 0 0 20px rgba(241, 196, 15, 0.3);
}

/* =======================================
   HAND CARDS LAYOUT - æ‰‹ç‰Œå¸ƒå±€ä¼˜åŒ–
   ======================================= */

/* æ‰‹ç‰Œå®¹å™¨ */
.player-hand-cards {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  gap: var(--card-gap);
  padding: var(--space-3);
  max-width: 100%;
  overflow-x: auto;
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
}

.player-hand-cards::-webkit-scrollbar {
  height: 6px;
}

.player-hand-cards::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-sm);
}

.player-hand-cards::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.3);
  border-radius: var(--radius-sm);
}

/* é€‰ä¸­çš„ç‰Œ */
.player-card.selected {
  transform: translateY(-8px) scale(1.05);
  box-shadow: var(--shadow-card-hover), 0 0 20px rgba(241, 196, 15, 0.4);
  z-index: 10;
}

/* ç‰Œç»„å¸ƒå±€ */
.card-group {
  display: flex;
  align-items: center;
  gap: var(--card-gap-sm);
  margin: var(--space-1);
}

/* ç‰¹æ®Šç‰Œå‹å¸ƒå±€ */
.card-sequence {
  position: relative;
}

.card-sequence .player-card {
  margin-right: -12px; /* é‡å æ•ˆæœ */
}

.card-sequence .player-card:last-child {
  margin-right: 0;
}

/* =======================================
   CENTRAL AREA LAYOUT - ä¸­å¤®åŒºåŸŸå¸ƒå±€
   ======================================= */

.central-play-area {
  display: grid;
  grid-template-areas:
    "north-play"
    "center-info"
    "south-play";
  grid-template-rows: 1fr auto 1fr;
  gap: var(--space-4);
  padding: var(--space-4);
  min-height: 300px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--radius-xl);
  border: 1px solid rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
}

/* å‡ºç‰ŒåŒºåŸŸ */
.played-cards-area {
  grid-area: center-info;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--space-3);
  padding: var(--space-4);
  background: rgba(255, 255, 255, 0.03);
  border-radius: var(--radius-lg);
  border: 1px dashed rgba(255, 255, 255, 0.2);
  min-height: 120px;
}

/* ä¸Šä¸€è½®å‡ºç‰Œæ˜¾ç¤º */
.last-play-area {
  position: absolute;
  top: var(--space-2);
  right: var(--space-2);
  background: rgba(0, 0, 0, 0.5);
  padding: var(--space-2);
  border-radius: var(--radius-md);
  font-size: var(--font-size-xs);
  opacity: 0.8;
}

/* =======================================
   CONTROL PANEL LAYOUT - æ§åˆ¶é¢æ¿å¸ƒå±€
   ======================================= */

/* æ’é™¤932x430åˆ†è¾¨ç‡ï¼Œé¿å…ä¸ä¸“ç”¨æ ·å¼å†²çª */
@media not screen and (width: 932px) and (height: 430px) {
  .control-panel {
    background: linear-gradient(135deg,
      rgba(52, 73, 94, 0.95) 0%,
      rgba(44, 62, 80, 0.9) 100%);
    border-radius: var(--radius-xl);
    padding: var(--space-4);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: var(--shadow-lg);
    backdrop-filter: blur(10px);
  }

  /* æ§åˆ¶æŒ‰é’®å¸ƒå±€ */
  .control-buttons {
    display: flex;
    gap: var(--space-3);
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
  }
}

/* æ¸¸æˆçŠ¶æ€æ˜¾ç¤º */
.game-status {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  margin-bottom: var(--space-3);
  padding: var(--space-3);
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--radius-lg);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
}

/* =======================================
   SPECIAL LAYOUTS - ç‰¹æ®Šå¸ƒå±€åœºæ™¯
   ======================================= */

/* æ¸¸æˆå¼€å§‹ç•Œé¢ */
.game-start-screen {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--space-6);
  padding: var(--space-8);
  text-align: center;
}

/* æ¸¸æˆç»“æŸç•Œé¢ */
.game-over-screen {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(10px);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--space-6);
  z-index: var(--z-modal);
}

/* åŠ è½½ç•Œé¢ */
.loading-screen {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--space-4);
  min-height: 100vh;
  background: var(--color-game-bg-start);
}

/* =======================================
   ANIMATION LAYOUTS - åŠ¨ç”»å¸ƒå±€
   ======================================= */

/* ç‰Œå…¥åœºåŠ¨ç”» */
@keyframes cardEnter {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.9);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* å‡ºç‰ŒåŠ¨ç”» */
@keyframes cardPlay {
  0% {
    transform: translateY(0) scale(1);
  }
  50% {
    transform: translateY(-10px) scale(1.1);
  }
  100% {
    transform: translateY(-20px) scale(1);
  }
}

/* èƒœåˆ©åŠ¨ç”» */
@keyframes victory {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

/* åŠ¨ç”»ç±» */
.animate-card-enter {
  animation: cardEnter var(--duration-normal) var(--ease-out);
}

.animate-card-play {
  animation: cardPlay var(--duration-normal) var(--ease-in-out);
}

.animate-victory {
  animation: victory var(--duration-slow) var(--ease-in-out) infinite;
}

/* =======================================
   UTILITY CLASSES - å·¥å…·ç±»
   ======================================= */

/* éšè—å…ƒç´  */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* å¯è®¿é—®æ€§éšè— */
.visually-hidden {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/* ç„¦ç‚¹å¯è§ */
.focus-visible:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
}

/* è§¦æ‘¸ç›®æ ‡ä¼˜åŒ– */
.touch-target {
  min-width: var(--min-touch-target);
  min-height: var(--min-touch-target);
}

/* å“åº”å¼æ˜¾ç¤ºæ§åˆ¶ */
@media (max-width: 480px) {
  .mobile-hidden {
    display: none !important;
  }
}

@media (min-width: 481px) {
  .mobile-only {
    display: none !important;
  }
}

@media (min-width: 769px) {
  .tablet-hidden {
    display: none !important;
  }
}

@media (max-width: 768px) {
  .tablet-only {
    display: none !important;
  }
}